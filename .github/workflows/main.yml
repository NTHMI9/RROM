name: VH-OS
on: 
  workflow_dispatch:
  issues:
    types:
      - opened
      #- reopened
permissions: write-all
jobs:
  build:
    name: 'Xem qu√° tr√¨nh'
    if: github.repository == 'chamchamfy/RROM' && github.ref == 'refs/heads/main'
    runs-on: ubuntu-22.04
    steps:
      - name: 'Chat bot'
        uses: actions/stale@v8
        with:
          only-labels: "Build"
          stale-issue-label: "Wait"
          stale-issue-message: "ƒêang trong qu√° tr√¨nh x√¢y d·ª±ng, vui l√≤ng ch·ªù...<br/><br/>Sau khi xong link s·∫Ω ƒë∆∞·ª£c g·ª≠i v√†o b√†i vi·∫øt n√†y.<br/><br/>Ho·∫∑c xem qu√° tr√¨nh x√¢y d·ª±ng [üì±Actions](https://github.com/chamchamfy/RROM/actions)"
          days-before-stale: 0
          repo-token: ${{ secrets.GITHUB_TOKEN }}
      - name: N·∫°p d·ªØ li·ªáu
        uses: actions/checkout@v3
      - name: 'T·∫£i v·ªÅ'
        run: |
          # Taive          
          bash .github/Taive.sh
      - name: 'Xem build ROM'
        run: |
          # CC          
          bash .github/Chay.sh
      - name: Upload
        run: |
          # kakathic
          TOME="$GITHUB_WORKSPACE"
          cd $TOME/.github/libpy/Flash2in1
          echo $TOME/$NEMEROM
          zip -qr $TOME/$NEMEROM *
          url2="$(curl -s https://api.gofile.io/getServer | jq -r .data.server)"
          eval "curl -F 'file=@$TOME/$NEMEROM' 'https://$url2.gofile.io/uploadFile' > $TOME/1.json"
          echo
          echo "LINKROM=$(cat $TOME/1.json | jq -r .data.downloadPage)" | tee -a $GITHUB_ENV
          echo "MD5=$(cat $TOME/1.json | jq -r .data.md5)" | tee -a $GITHUB_ENV
          echo "NAMER=$(cat $TOME/1.json | jq -r .data.fileName)" | tee -a $GITHUB_ENV
      - name: D√°n Th·∫ª
        uses: actions-cool/issues-helper@v3
        with:
          actions: 'add-labels'
          labels: 'Ho√†n th√†nh'
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: 2
      - name: D√°n Link
        uses: actions-cool/issues-helper@v3
        with:
          actions: 'create-comment'
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: 2
          body: |
            NAME: ${{ env.NAMER }}<br/><br/>LINK DOWNLOAD: ${{ env.LINKROM }}<br/><br/>MD5: ${{ env.MD5 }}   
          
